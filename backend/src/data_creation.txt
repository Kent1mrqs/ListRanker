use models::{NewUser, NewItem, NewList};
use user_service::{create_new_user, get_all_users, get_users};
use list_service::{create_new_list, get_all_lists, get_lists};
use item_service::{create_new_item, get_all_items};

    let database_url = "postgres://user:secret@localhost/db";
    let mut conn = PgConnection::establish(&database_url)
        .expect("Erreur lors de la connexion à la base de données");

    let new_user = NewUser {
        username: "example_user",
        email: "user@example.com",
        password_hash: "hashed_password",
    };

    match create_new_user(&mut conn, new_user) {
        Ok(_) => println!("Nouvel utilisateur ajouté avec succès!"),
        Err(err) => println!("Erreur lors de l'ajout de l'utilisateur : {}", err),
    }

    match get_all_users(&mut conn) {
        Ok(users) => {
            for user in users {
                println!("ID: {}, Username: {}, Email: {}", user.id, user.username, user.email);
            }
        }
        Err(err) => println!("Erreur lors de la récupération des utilisateurs : {}", err),
    }

    let new_list = NewList {
        user_id: None,
        list_id: 1,
        name: "Ma première liste",
    };

    match create_new_list(&mut conn, new_list) {
        Ok(_) => println!("Nouvelle liste ajoutée avec succès!"),
        Err(err) => println!("Erreur lors de l'ajout de la liste : {}", err),
    }

    match get_all_lists(&mut conn) {
        Ok(lists) => {
            for list in lists {
                println!("ID: {}, User ID: {:?}, Name: {}", list.list_id, list.user_id, list.name);
            }
        }
        Err(err) => println!("Erreur lors de la récupération des listes : {}", err),
    }

    let new_item = NewItem {
        list_id: None,
        name: "Mon premier item",
    };

    match create_new_item(&mut conn, new_item) {
        Ok(_) => println!("Nouvelle liste ajoutée avec succès!"),
        Err(err) => println!("Erreur lors de l'ajout de la liste : {}", err),
    }

    match get_all_items(&mut conn) {
        Ok(items) => {
            for item in items {
                println!("ID: {}, List ID: {:?}, Name: {}", item.item_id, item.list_id, item.name);
            }
        }
        Err(err) => println!("Erreur lors de la récupération des items : {}", err),
    }